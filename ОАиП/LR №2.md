---
name: Рячкина Екатерина ЛБ 2
tags:
  - block_diagrams
  - practic
  - mermaid
---
## Составление блок-схем с помощью mermaid

**Цель работы:** Научиться создавать блок-схемы с помощью mermaid

**Задачи работы:**
1. Изучить теоретический материал
2. Составить блок-схемы по заданию

**Критерии оценки:**
1. Правильность составленных блок-схем
2. Полнота составленных блок-схем
3. Выполнение дополнительного задания

### Теоретическая часть
[[Основы работы с mermaid]]

### Практическое часть

#### Задание 1.

Напишите блок схему отправки ping с устройства на устройство.

**Условия**: В блок схеме должно быть: 
- блоки ввода данных для ip
- как минимум один цикл
- блок вывода данных
```mermaid
flowchart TD

A(["Начало: Отправка пакета"]) --> B["Получить IP назначения из пакета"]

B --> C["Поиск в таблице маршрутизации<br>IP"]

C --> D{"Найден маршрут?"}

D -- Нет --> E["Отбросить пакет"]

E --> F["Пакет потерян"]

D -- Да --> G["Получить next_hop и метрику"]

G --> H["Передать пакет следующему узлу"]

I["Пакет прибывает на OSPF-маршрутизатор"] --> J["Обновить TTL: ttl = ttl - 1"]

J --> K{"ttl = 0?"}

K -- Да --> L["Отбросить пакет<br>"]

K -- Нет --> M["Поиск в таблице маршрутизации"]

M --> N{"Достигнут пункт назначения?"}

N -- Нет --> O["Выбрать следующий hop<br>на основе SPF-дерева"]

O --> I

H --> I

N -- Да --> P["Пакет доставлен"]

L --> F

P --> n1["Конец"]

F --> n1

Рячкина
```
#### Задание 2.

Вспомните как работает протокол ospf, а в частности его алгоритм поиска кратчайшего пути. Составьте блок-схему отправки сообщения с одного устройства до другого, которые объединены несколькими маршрутизаторами с ospf протоколом.

**Условия**: В блок схеме должно быть: 
- должно быть как минимум одно условие
- должен быть как минимум один цикл
- должна быть как минимум одна определённая переменная
```mermaid
flowchart TD

subgraph Phase1 [Построение таблиц маршрутизации OSPF]

A[Маршрутизаторы обмениваются LSA-пакетами] --> B[Каждый маршрутизатор строит полную карту сети LSDB]

B --> C[Алгоритм Дейкстры вычисляет кратчайшие пути]

C --> D[Формирование таблицы маршрутизации]

    end

D --> Start[Начало отправки сообщения]

Start --> Device[Устройство-отправитель формирует IP-пакет]

Device --> Router1[Текущий маршрутизатор = R1]

Router1 --> CheckDirect{Сеть назначения подключена напрямую?}

CheckDirect -- НЕТ --> LookupTable[Поиск в таблице маршрутизации]

LookupTable --> FindNextHop[Определен следующий прыжок]

FindNextHop --> Forward[Пересылка пакета следующему маршрутизатору]

Forward --> UpdateVar[Текущий маршрутизатор = следующий]

UpdateVar --> CheckDirect

CheckDirect -- ДА --> FinalHop[Последний прыжок]

FinalHop --> ARP[ARP-запрос для определения MAC-адреса]

ARP --> Deliver[Пакет доставлен конечному устройству]

Deliver --> End[Конец]

рячкина
```
#### Задание 3.

Вспомним как работает протокол ssh. Составим блок-схему подключения одного узла к другому через ssh

**Условия**: 
- Должно быть условие проверки пароля
- У пользователя есть 3 попытки ввода пароля
- Должны быть блоки ввода и вывода информации
``` mermaid
flowchart TD

    Start[Начало SSH-подключения] --> InputAddr[Ввод SSH-команды]

    InputAddr --> TCP[Установка TCP-соединения на порт 22]

    TCP --> Banner[Получение баннера SSH-сервера]

    Banner --> KeyExchange[Обмен ключами]

    KeyExchange --> AuthMethod{Выбор метода аутентификации}

    AuthMethod -- Пароль --> PasswordAuth

    AuthMethod -- Ключ --> KeyAuth[Аутентификация по ключу]

    subgraph PasswordAuth [Аутентификация по паролю]

        PA1[Запрос пароля] --> PA2[Ввод пароля пользователем]

        PA2 --> PA3[Шифрование и отправка пароля]

        PA3 --> PA4{Проверка пароля на сервере}

    end

    KeyAuth --> CheckResult

    PA4 --> CheckResult{Результат проверки}

    CheckResult -- Успех --> Success[Аутентификация успешна]

    CheckResult -- Неудача --> AttemptCheck{Попытка < 3?}

    AttemptCheck -- Да --> Retry[Повторная попытка]

    Retry --> PA2

    AttemptCheck -- Нет --> MaxAttempts[Превышено количество попыток]

    MaxAttempts --> Disconnect[Разрыв соединения]

    Disconnect --> AuthFail[Аутентификация не удалась]

    Success --> Shell[Запуск SSH-сессии]

    Shell --> Output[Вывод приглашения командной строки]

    Output --> Session{Работа в сессии}

    Session -- Выполнение команд --> Command[Ввод команд]

    Command --> Exec[Выполнение на сервере]

    Exec --> Result[Вывод результатов]

    Result --> Session

    Session -- Выход --> Exit[Команда exit]

    Exit --> Close[Закрытие соединения]

    Close --> End[Конец сессии]

    AuthFail --> End
```
#### Задание 4

#### Вариант 8
Найти среднее арифметическое всех элементов в массиве из N вещественных чисел.

*Пояснение*: Нужно сначала найти сумму всех элементов в цикле, а затем разделить эту сумму на их количество. (Создайте переменную для подсчета суммы элементов)
```mermaid
flowchart TD

    A([Начало]) --> B[Объявить: N, i=0, sum=0, average]

    B --> C[Ввести N]

    C --> D{i < N?}

    D -- Да --> E[Ввести число x]

    E --> F[sum = sum + x]

    F --> G[i = i + 1]

    G --> D

    D -- Нет --> H[average = sum / N]

    H --> I[Вывести average]

    I --> J([Конец])
```