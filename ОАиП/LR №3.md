---
name: Рячкина Екатерина ЛБ 3
tags:
  - practic
  - mermaid
  - sequence
---
## Составление блок-схем с помощью mermaid - sequence-диаграммы

**Цель работы:** Научиться создавать sequence-диаграммы с помощью mermaid

**Задачи работы:**
1. Изучить теоретический материал
2. Составить sequence диаграммы по заданию

**Критерии оценки:**
1. Правильность составленных диаграмм
2. Полнота составленных диаграмм
3. Выполнение дополнительного задания

### Теоретическая часть
[[Основы работы с mermaid - sequence-диаграммы]]

### Практическое часть

#### Задание 1.

Напишите Sequence-диаграмму отправки ping-запроса на сервер.

**Условия**: В диаграмме должно быть:
- Запрос и ответ от сервера
```mermaid
sequenceDiagram
participant Client as Клиент
participant Server as Сервер
Note over Client,Server: Процесс отправки ping-запроса
Client->>Server: Ping-запрос (ICMP Echo Request)
Note right of Server: Сервер получает запрос
Server-->>Client: Ping-ответ (ICMP Echo Reply)
Note left of Client: Клиент получает ответ
Note over Client,Server: Соединение установлено

```
#### Задание 2.

В теоретической части рассматривался пример авторизации на сайте. Напишите подобную sequence-диаграмму авторизации на сайте, но с двойной аутентификацией.

**Условия**: В диаграмме должно быть:
- Ввод пароля
- Двойная аутентификация (например по смс)
```mermaid
sequenceDiagram
participant U as Пользователь
participant S as Сервер
participant SMS as СМС-сервис
U->>S: Ввод логина/пароля
activate S
S-->>U: Запрос 2FA кода
deactivate S
 S->>SMS: Генерация и отправка кода
SMS-->>U: СМС с кодом
U->>S: Ввод кода подтверждения
activate S
S-->>U: Успешная авторизация
deactivate S
```
#### Задание 3.

Представьте что вы кассир в Пятерочке. К вам приходит покупатель с покупками. Визуализируйте вашу работу с покупателем и кассой.

**Условия**: 
- Должно быть как минимум 4 объекта
```mermaid
sequenceDiagram
participant P as Покупатель
participant K as Кассир
participant КА as Кассовый аппарат
participant Т as Платежный терминал
participant Б as Бонусная система
P->>K: Подходит с корзиной товаров
K->>КА: Открытие чека
loop Сканирование товаров
K->>КА: Сканирует штрихкод
КА-->>P: Показывает цену на дисплее
 end
K->>P: "У вас есть бонусная карта?"
P->>K: Предъявляет бонусную карту
K->>КА: Сканирует бонусную карту
КА->>Б: Запрос баланса бонусов
Б-->>КА: Баланс: 150 бонусов
КА-->>K: Доступно 150 бонусов
K->>P: "Спишем бонусы?"
P->>K: "Да, спишите 100 бонусов"
K->>КА: Применение 100 бонусов
КА-->>K: Итоговая сумма после скидки
K->>P: "К оплате X рублей"
P->>K: "Оплачу картой
K->>КА: Оплата картой
КА->>Т: Подготовка к оплате
Т-->>P: "Приложите карту"
P->>Т: Прикладывает карту
Т-->>КА: Оплата успешна
КА->>K: Печать чека
K->>P: Передает чек и товары
P-->>K: "Спасибо!"
```
#### Задание 4*.

Представьте что вы осуществляете DDoS атаку на Сервер. Визуализируйте это в диаграмме.

**Условия**:
- Хакер осуществляет атаку асинхронно.
- Нужно показать как сервер перестаёт отвечать на вопросы

```mermaid
sequenceDiagram
participant H as Хакер
participant B as Ботнет
participant S as Сервер
participant L as Легитимный пользовател
Note over H,S: Фаза 1: Подготовка атаки
activate B
B-->>H: Подтверждение готовности
Note over H,S: Фаза 2: Массированная атака
par Асинхронные атаки от ботнета
loop Бесконечные запросы
B->>S: HTTP Flood запрос
end
loop UDP flood
B->>S: UDP пакеты
end
loop SYN flood
B->>S: SYN запросы (полуоткрытые соединения)
end
end
Note over H,S: Фаза 3: Перегрузка сервера
S->>S: Перегрузка ресурсов CPU/RAM
S->>S: Исчерпание сетевых соединений
S->>S: Заполнение очереди запросов
Note over H,S: Фаза 4: Сервер перестает отвечать
L->>S: Легитимный HTTP запрос
S-->>L: Таймаут соединения
L->>S: Повторный запрос
S-->>L: Ошибка 503 Service Unavailable
L->>S: Ping запрос
S-->>L: Нет ответа (timeout)
Note over H,S: Фаза 5: Результат атаки
deactivate B
B-->>H: Подтверждение остановки
Note right of S: Сервер неработоспособен<br/>Все ресурсы исчерпаны
```
